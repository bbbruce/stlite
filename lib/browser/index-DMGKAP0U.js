import{r,bN as w,z as H,cX as x,j as s,bX as D,bY as E,ca as U,bZ as A,bG as B}from"./index-BlQj7Hmn.js";import{u as L}from"./uniqueId-CBRr8s3C.js";import{u as M,a as P,b as _}from"./useOnInputChange-C0P4UOhE.js";import{I as G}from"./InputInstructions-Bv4afE3Q.js";import{a as N}from"./useBasicWidgetState-DzOvKEW1.js";import{T as X}from"./textarea-BWOJVKd6.js";const W=(a,e)=>a.getStringValue(e)??e.default??null,K=a=>a.default??null,O=a=>a.value??null,Y=(a,e,i,d)=>{e.setStringValue(a,i.value,{fromUi:i.fromUi},d)},$=({disabled:a,element:e,widgetMgr:i,fragmentId:d})=>{var b;const p=r.useRef(L("text_area_")).current,[S,v]=w(),[l,m]=r.useState(!1),[I,c]=r.useState(!1),[o,n]=r.useState(()=>W(i,e)??null),C=r.useCallback(()=>{n(e.default??null),m(!0)},[e]),[T,u]=N({getStateFromWidgetMgr:W,getDefaultStateFromProto:K,getCurrStateFromProto:O,updateWidgetMgrState:Y,element:e,widgetMgr:i,fragmentId:d,onFormCleared:C});M(T,o,n,l);const t=H(),g=r.useCallback(()=>{m(!1),u({value:o,fromUi:!0})},[o,u]),y=r.useCallback(()=>{l&&g(),c(!1)},[l,g]),F=r.useCallback(()=>{c(!0)},[]),j=P({formId:e.formId,maxChars:e.maxChars,setDirty:m,setUiValue:n,setValueWithSource:u}),z=_(e.formId,g,l,i,d,!0),{height:f,placeholder:R,formId:h}=e,V=x({formId:h})?i.allowFormEnterToSubmit(h):l,k=I&&S>t.breakpoints.hideWidgetDetails;return s.jsxs("div",{className:"stTextArea","data-testid":"stTextArea",ref:v,children:[s.jsx(D,{label:e.label,disabled:a,labelVisibility:E((b=e.labelVisibility)==null?void 0:b.value),htmlFor:p,children:e.help&&s.jsx(U,{children:s.jsx(A,{content:e.help,placement:B.TOP_RIGHT})})}),s.jsx(X,{value:o??"",placeholder:R,onBlur:y,onFocus:F,onChange:j,onKeyDown:z,"aria-label":e.label,disabled:a,id:p,overrides:{Input:{style:{lineHeight:t.lineHeights.inputWidget,height:f?`${f}px`:"",minHeight:t.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:t.spacing.md,paddingLeft:t.spacing.md,paddingBottom:t.spacing.md,paddingTop:t.spacing.md}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:t.sizes.borderWidth,borderRightWidth:t.sizes.borderWidth,borderTopWidth:t.sizes.borderWidth,borderBottomWidth:t.sizes.borderWidth}}}}),k&&s.jsx(G,{dirty:l,value:o??"",maxLength:e.maxChars,type:"multiline",inForm:x({formId:h}),allowEnterToSubmit:V})]})},q=r.memo($);export{q as default};
