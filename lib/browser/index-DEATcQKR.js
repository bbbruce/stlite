import{e as _e,c0 as G,r as C,cv as pt,ci as gt,c1 as J,cw as mt,cx as vt,c as le,H as bt,ca as yt,z as wt,be as xt,j as Z,R as ze,cV as kt,bY as Tt,bZ as Ot,cb as Mt,b_ as Rt,bH as St,O as Dt,cW as Me}from"./index-B3URMCDH.js";import{s as Ae}from"./sprintf-CQZ7AWXD.js";import{a as Et}from"./useBasicWidgetState-D0YqqcVB.js";var de={},H={},he={},Fe={},Ve;function Re(){return Ve||(Ve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,function(n){n.Right="to right",n.Left="to left",n.Down="to bottom",n.Up="to top"}(e.Direction||(e.Direction={}))}(Fe)),Fe}var Ne;function Ue(){return Ne||(Ne=1,function(e){var n=he&&he.__spreadArray||function(o,i,u){if(u||arguments.length===2)for(var f=0,S=i.length,v;f<S;f++)(v||!(f in i))&&(v||(v=Array.prototype.slice.call(i,0,f)),v[f]=i[f]);return o.concat(v||Array.prototype.slice.call(i))};Object.defineProperty(e,"__esModule",{value:!0}),e.useThumbOverlap=e.assertUnreachable=e.voidFn=e.getTrackBackground=e.replaceAt=e.schd=e.translate=e.getClosestThumbIndex=e.translateThumbs=e.getPaddingAndBorder=e.getMargin=e.checkInitialOverlap=e.checkValuesAgainstBoundaries=e.checkBoundaries=e.isVertical=e.relativeValue=e.normalizeValue=e.isStepDivisible=e.isTouchEvent=e.getStepDecimals=void 0;var a=_e(),s=Re(),g=function(o){var i=o.toString().split(".")[1];return i?i.length:0};e.getStepDecimals=g;function k(o){return o.touches&&o.touches.length||o.changedTouches&&o.changedTouches.length}e.isTouchEvent=k;function l(o,i,u){var f=(i-o)/u,S=8,v=Number(f.toFixed(S));return parseInt(v.toString(),10)===v}e.isStepDivisible=l;function h(o,i,u,f,S,v,w){var b=1e11;if(o=Math.round(o*b)/b,!v){var P=w[i-1],j=w[i+1];if(P&&P>o)return P;if(j&&j<o)return j}if(o>f)return f;if(o<u)return u;var L=Math.floor(o*b-u*b)%Math.floor(S*b),N=Math.floor(o*b-Math.abs(L)),X=L===0?o:N/b,_=Math.abs(L/b)<S/2?X:X+S,U=(0,e.getStepDecimals)(S);return parseFloat(_.toFixed(U))}e.normalizeValue=h;function z(o,i,u){return(o-i)/(u-i)}e.relativeValue=z;function V(o){return o===s.Direction.Up||o===s.Direction.Down}e.isVertical=V;function A(o,i,u){if(i>=u)throw new RangeError("min (".concat(i,") is equal/bigger than max (").concat(u,")"));if(o<i)throw new RangeError("value (".concat(o,") is smaller than min (").concat(i,")"));if(o>u)throw new RangeError("value (".concat(o,") is bigger than max (").concat(u,")"))}e.checkBoundaries=A;function O(o,i,u){return o<i?i:o>u?u:o}e.checkValuesAgainstBoundaries=O;function x(o){if(!(o.length<2)&&!o.slice(1).every(function(i,u){return o[u]<=i}))throw new RangeError("values={[".concat(o,"]} needs to be sorted when allowOverlap={false}"))}e.checkInitialOverlap=x;function d(o){var i=window.getComputedStyle(o);return{top:parseInt(i["margin-top"],10),bottom:parseInt(i["margin-bottom"],10),left:parseInt(i["margin-left"],10),right:parseInt(i["margin-right"],10)}}e.getMargin=d;function t(o){var i=window.getComputedStyle(o);return{top:parseInt(i["padding-top"],10)+parseInt(i["border-top-width"],10),bottom:parseInt(i["padding-bottom"],10)+parseInt(i["border-bottom-width"],10),left:parseInt(i["padding-left"],10)+parseInt(i["border-left-width"],10),right:parseInt(i["padding-right"],10)+parseInt(i["border-right-width"],10)}}e.getPaddingAndBorder=t;function r(o,i,u){var f=u?-1:1;o.forEach(function(S,v){return p(S,f*i[v].x,i[v].y)})}e.translateThumbs=r;function c(o,i,u,f){for(var S=0,v=B(o[0],i,u,f),w=1;w<o.length;w++){var b=B(o[w],i,u,f);b<v&&(v=b,S=w)}return S}e.getClosestThumbIndex=c;function p(o,i,u){o.style.transform="translate(".concat(i,"px, ").concat(u,"px)")}e.translate=p;var y=function(o){var i=[],u=null,f=function(){for(var S=[],v=0;v<arguments.length;v++)S[v]=arguments[v];i=S,!u&&(u=requestAnimationFrame(function(){u=null,o.apply(void 0,i)}))};return f};e.schd=y;function T(o,i,u){var f=o.slice(0);return f[i]=u,f}e.replaceAt=T;function E(o){var i=o.values,u=o.colors,f=o.min,S=o.max,v=o.direction,w=v===void 0?s.Direction.Right:v,b=o.rtl,P=b===void 0?!1:b;P&&w===s.Direction.Right?w=s.Direction.Left:P&&s.Direction.Left&&(w=s.Direction.Right);var j=i.slice(0).sort(function(N,X){return N-X}).map(function(N){return(N-f)/(S-f)*100}),L=j.reduce(function(N,X,_){return"".concat(N,", ").concat(u[_]," ").concat(X,"%, ").concat(u[_+1]," ").concat(X,"%")},"");return"linear-gradient(".concat(w,", ").concat(u[0]," 0%").concat(L,", ").concat(u[u.length-1]," 100%)")}e.getTrackBackground=E;function D(){}e.voidFn=D;function R(o){throw new Error("Didn't expect to get here")}e.assertUnreachable=R;var M=function(o,i,u,f,S){S===void 0&&(S=function(w){return w});var v=Math.ceil(n([o],Array.from(o.children),!0).reduce(function(w,b){var P=Math.ceil(b.getBoundingClientRect().width);if(b.innerText&&b.innerText.includes(u)&&b.childElementCount===0){var j=b.cloneNode(!0);j.innerHTML=S(i.toFixed(f)),j.style.visibility="hidden",document.body.appendChild(j),P=Math.ceil(j.getBoundingClientRect().width),document.body.removeChild(j)}return P>w?P:w},o.getBoundingClientRect().width));return v},I=function(o,i,u,f,S,v,w){w===void 0&&(w=function(j){return j});var b=[],P=function(j){var L=M(u[j],f[j],S,v,w),N=i[j].x;i.forEach(function(X,_){var U=X.x,F=M(u[_],f[_],S,v,w);j!==_&&(N>=U&&N<=U+F||N+L>=U&&N+L<=U+F)&&(b.includes(_)||(b.push(j),b.push(_),b=n(n([],b,!0),[j,_],!1),P(_)))})};return P(o),Array.from(new Set(b.sort()))},m=function(o,i,u,f,S,v){f===void 0&&(f=.1),S===void 0&&(S=" - "),v===void 0&&(v=function(_){return _});var w=(0,e.getStepDecimals)(f),b=(0,a.useState)({}),P=b[0],j=b[1],L=(0,a.useState)(v(i[u].toFixed(w))),N=L[0],X=L[1];return(0,a.useEffect)(function(){if(o){var _=o.getThumbs();if(_.length<1)return;var U={},F=o.getOffsets(),te=I(u,F,_,i,S,w,v),oe=v(i[u].toFixed(w));if(te.length){var ne=te.reduce(function(Q,ue,se,ce){return Q.length?n(n([],Q,!0),[F[ce[se]].x],!1):[F[ce[se]].x]},[]);if(Math.min.apply(Math,ne)===F[u].x){var re=[];te.forEach(function(Q){re.push(i[Q].toFixed(w))}),oe=Array.from(new Set(re.sort(function(Q,ue){return parseFloat(Q)-parseFloat(ue)}))).map(v).join(S);var Te=Math.min.apply(Math,ne),ie=Math.max.apply(Math,ne),Oe=_[te[ne.indexOf(ie)]].getBoundingClientRect().width;U.left="".concat(Math.abs(Te-(ie+Oe))/2,"px"),U.transform="translate(-50%, 0)"}else U.visibility="hidden"}X(oe),j(U)}},[o,i]),[N,P]};e.useThumbOverlap=m;function B(o,i,u,f){var S=o.getBoundingClientRect(),v=S.left,w=S.top,b=S.width,P=S.height;return V(f)?Math.abs(u-(w+P/2)):Math.abs(i-(v+b/2))}}(he)),he}var He;function Ct(){if(He)return H;He=1;var e=H&&H.__extends||function(){var O=function(x,d){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])},O(x,d)};return function(x,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");O(x,d);function t(){this.constructor=x}x.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}(),n=H&&H.__createBinding||(Object.create?function(O,x,d,t){t===void 0&&(t=d);var r=Object.getOwnPropertyDescriptor(x,d);(!r||("get"in r?!x.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return x[d]}}),Object.defineProperty(O,t,r)}:function(O,x,d,t){t===void 0&&(t=d),O[t]=x[d]}),a=H&&H.__setModuleDefault||(Object.create?function(O,x){Object.defineProperty(O,"default",{enumerable:!0,value:x})}:function(O,x){O.default=x}),s=H&&H.__importStar||function(O){if(O&&O.__esModule)return O;var x={};if(O!=null)for(var d in O)d!=="default"&&Object.prototype.hasOwnProperty.call(O,d)&&n(x,O,d);return a(x,O),x},g=H&&H.__spreadArray||function(O,x,d){if(d||arguments.length===2)for(var t=0,r=x.length,c;t<r;t++)(c||!(t in x))&&(c||(c=Array.prototype.slice.call(x,0,t)),c[t]=x[t]);return O.concat(c||Array.prototype.slice.call(x))};Object.defineProperty(H,"__esModule",{value:!0});var k=s(_e()),l=Ue(),h=Re(),z=["ArrowRight","ArrowUp","k","PageUp"],V=["ArrowLeft","ArrowDown","j","PageDown"],A=function(O){e(x,O);function x(d){var t=O.call(this,d)||this;if(t.trackRef=k.createRef(),t.thumbRefs=[],t.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(t.props.values.length).fill(0).map(function(r,c){return c}),isChanged:!1,markOffsets:[]},t.getOffsets=function(){var r=t.props,c=r.direction,p=r.values,y=r.min,T=r.max,E=t.trackRef.current,D=E.getBoundingClientRect(),R=(0,l.getPaddingAndBorder)(E);return t.getThumbs().map(function(M,I){var m={x:0,y:0},B=M.getBoundingClientRect(),o=(0,l.getMargin)(M);switch(c){case h.Direction.Right:return m.x=(o.left+R.left)*-1,m.y=((B.height-D.height)/2+R.top)*-1,m.x+=D.width*(0,l.relativeValue)(p[I],y,T)-B.width/2,m;case h.Direction.Left:return m.x=(o.right+R.right)*-1,m.y=((B.height-D.height)/2+R.top)*-1,m.x+=D.width-D.width*(0,l.relativeValue)(p[I],y,T)-B.width/2,m;case h.Direction.Up:return m.x=((B.width-D.width)/2+o.left+R.left)*-1,m.y=-R.left,m.y+=D.height-D.height*(0,l.relativeValue)(p[I],y,T)-B.height/2,m;case h.Direction.Down:return m.x=((B.width-D.width)/2+o.left+R.left)*-1,m.y=-R.left,m.y+=D.height*(0,l.relativeValue)(p[I],y,T)-B.height/2,m;default:return(0,l.assertUnreachable)(c)}})},t.getThumbs=function(){return t.trackRef&&t.trackRef.current?Array.from(t.trackRef.current.children).filter(function(r){return r.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},t.getTargetIndex=function(r){return t.getThumbs().findIndex(function(c){return c===r.target||c.contains(r.target)})},t.addTouchEvents=function(r){document.addEventListener("touchmove",t.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",t.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",t.schdOnEnd,{passive:!1})},t.addMouseEvents=function(r){document.addEventListener("mousemove",t.schdOnMouseMove),document.addEventListener("mouseup",t.schdOnEnd)},t.onMouseDownTrack=function(r){var c;if(r.button===0)if(r.persist(),r.preventDefault(),t.addMouseEvents(r.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(y){var T;return(T=y.current)===null||T===void 0?void 0:T.contains(r.target)}))return;t.setState({draggedTrackPos:[r.clientX,r.clientY]},function(){return t.onMove(r.clientX,r.clientY)})}else{var p=(0,l.getClosestThumbIndex)(t.thumbRefs.map(function(y){return y.current}),r.clientX,r.clientY,t.props.direction);(c=t.thumbRefs[p].current)===null||c===void 0||c.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(r.clientX,r.clientY)})}},t.onResize=function(){(0,l.translateThumbs)(t.getThumbs(),t.getOffsets(),t.props.rtl),t.calculateMarkOffsets()},t.onTouchStartTrack=function(r){var c;if(r.persist(),t.addTouchEvents(r.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(y){var T;return(T=y.current)===null||T===void 0?void 0:T.contains(r.target)}))return;t.setState({draggedTrackPos:[r.touches[0].clientX,r.touches[0].clientY]},function(){return t.onMove(r.touches[0].clientX,r.touches[0].clientY)})}else{var p=(0,l.getClosestThumbIndex)(t.thumbRefs.map(function(y){return y.current}),r.touches[0].clientX,r.touches[0].clientY,t.props.direction);(c=t.thumbRefs[p].current)===null||c===void 0||c.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(r.touches[0].clientX,r.touches[0].clientY)})}},t.onMouseOrTouchStart=function(r){if(!t.props.disabled){var c=(0,l.isTouchEvent)(r);if(!(!c&&r.button!==0)){var p=t.getTargetIndex(r);p!==-1&&(c?t.addTouchEvents(r):t.addMouseEvents(r),t.setState({draggedThumbIndex:p,thumbZIndexes:t.state.thumbZIndexes.map(function(y,T){return T===p?Math.max.apply(Math,t.state.thumbZIndexes):y<=t.state.thumbZIndexes[p]?y:y-1})}))}}},t.onMouseMove=function(r){r.preventDefault(),t.onMove(r.clientX,r.clientY)},t.onTouchMove=function(r){r.preventDefault(),t.onMove(r.touches[0].clientX,r.touches[0].clientY)},t.onKeyDown=function(r){var c=t.props,p=c.values,y=c.onChange,T=c.step,E=c.rtl,D=c.direction,R=t.state.isChanged,M=t.getTargetIndex(r.nativeEvent),I=E||D===h.Direction.Left||D===h.Direction.Down?-1:1;M!==-1&&(z.includes(r.key)?(r.preventDefault(),t.setState({draggedThumbIndex:M,isChanged:!0}),y((0,l.replaceAt)(p,M,t.normalizeValue(p[M]+I*(r.key==="PageUp"?T*10:T),M)))):V.includes(r.key)?(r.preventDefault(),t.setState({draggedThumbIndex:M,isChanged:!0}),y((0,l.replaceAt)(p,M,t.normalizeValue(p[M]-I*(r.key==="PageDown"?T*10:T),M)))):r.key==="Tab"?t.setState({draggedThumbIndex:-1},function(){R&&t.fireOnFinalChange()}):R&&t.fireOnFinalChange())},t.onKeyUp=function(r){var c=t.state.isChanged;t.setState({draggedThumbIndex:-1},function(){c&&t.fireOnFinalChange()})},t.onMove=function(r,c){var p=t.state,y=p.draggedThumbIndex,T=p.draggedTrackPos,E=t.props,D=E.direction,R=E.min,M=E.max,I=E.onChange,m=E.values,B=E.step,o=E.rtl;if(y===-1&&T[0]===-1&&T[1]===-1)return null;var i=t.trackRef.current;if(!i)return null;var u=i.getBoundingClientRect(),f=(0,l.isVertical)(D)?u.height:u.width;if(T[0]!==-1&&T[1]!==-1){var S=r-T[0],v=c-T[1],w=0;switch(D){case h.Direction.Right:case h.Direction.Left:w=S/f*(M-R);break;case h.Direction.Down:case h.Direction.Up:w=v/f*(M-R);break;default:(0,l.assertUnreachable)(D)}if(o&&(w*=-1),Math.abs(w)>=B/2){for(var b=0;b<t.thumbRefs.length;b++){if(m[b]===M&&Math.sign(w)===1||m[b]===R&&Math.sign(w)===-1)return;var P=m[b]+w;P>M?w=M-m[b]:P<R&&(w=R-m[b])}for(var j=m.slice(0),b=0;b<t.thumbRefs.length;b++)j=(0,l.replaceAt)(j,b,t.normalizeValue(m[b]+w,b));t.setState({draggedTrackPos:[r,c]}),I(j)}}else{var L=0;switch(D){case h.Direction.Right:L=(r-u.left)/f*(M-R)+R;break;case h.Direction.Left:L=(f-(r-u.left))/f*(M-R)+R;break;case h.Direction.Down:L=(c-u.top)/f*(M-R)+R;break;case h.Direction.Up:L=(f-(c-u.top))/f*(M-R)+R;break;default:(0,l.assertUnreachable)(D)}o&&(L=M+R-L),Math.abs(m[y]-L)>=B/2&&I((0,l.replaceAt)(m,y,t.normalizeValue(L,y)))}},t.normalizeValue=function(r,c){var p=t.props,y=p.min,T=p.max,E=p.step,D=p.allowOverlap,R=p.values;return(0,l.normalizeValue)(r,c,y,T,E,D,R)},t.onEnd=function(r){if(r.preventDefault(),document.removeEventListener("mousemove",t.schdOnMouseMove),document.removeEventListener("touchmove",t.schdOnTouchMove),document.removeEventListener("mouseup",t.schdOnEnd),document.removeEventListener("touchend",t.schdOnEnd),document.removeEventListener("touchcancel",t.schdOnEnd),t.state.draggedThumbIndex===-1&&t.state.draggedTrackPos[0]===-1&&t.state.draggedTrackPos[1]===-1)return null;t.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){t.fireOnFinalChange()})},t.fireOnFinalChange=function(){t.setState({isChanged:!1});var r=t.props,c=r.onFinalChange,p=r.values;c&&c(p)},t.updateMarkRefs=function(r){if(!r.renderMark){t.numOfMarks=void 0,t.markRefs=void 0;return}t.numOfMarks=(r.max-r.min)/t.props.step,t.markRefs=[];for(var c=0;c<t.numOfMarks+1;c++)t.markRefs[c]=k.createRef()},t.calculateMarkOffsets=function(){if(!(!t.props.renderMark||!t.trackRef||!t.numOfMarks||!t.markRefs||t.trackRef.current===null)){for(var r=window.getComputedStyle(t.trackRef.current),c=parseInt(r.width,10),p=parseInt(r.height,10),y=parseInt(r.paddingLeft,10),T=parseInt(r.paddingTop,10),E=[],D=0;D<t.numOfMarks+1;D++){var R=9999,M=9999;if(t.markRefs[D].current){var I=t.markRefs[D].current.getBoundingClientRect();R=I.height,M=I.width}t.props.direction===h.Direction.Left||t.props.direction===h.Direction.Right?E.push([Math.round(c/t.numOfMarks*D+y-M/2),-Math.round((R-p)/2)]):E.push([Math.round(p/t.numOfMarks*D+T-R/2),-Math.round((M-c)/2)])}t.setState({markOffsets:E})}},d.step===0)throw new Error('"step" property should be a positive number');return t.schdOnMouseMove=(0,l.schd)(t.onMouseMove),t.schdOnTouchMove=(0,l.schd)(t.onTouchMove),t.schdOnEnd=(0,l.schd)(t.onEnd),t.thumbRefs=d.values.map(function(){return k.createRef()}),t.updateMarkRefs(d),t}return x.prototype.componentDidMount=function(){var d=this,t=this.props,r=t.values,c=t.min,p=t.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",d.onResize)},unobserve:function(){return window.removeEventListener("resize",d.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,l.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(y){return(0,l.checkBoundaries)(y,d.props.min,d.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),r.forEach(function(y){(0,l.isStepDivisible)(c,y,p)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},x.prototype.componentDidUpdate=function(d,t){var r=this.props,c=r.max,p=r.min,y=r.step,T=r.values,E=r.rtl;(d.max!==c||d.min!==p||d.step!==y)&&this.updateMarkRefs(this.props),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),E),(d.max!==c||d.min!==p||d.step!==y||t.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),T.forEach(function(D){(0,l.isStepDivisible)(p,D,y)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},x.prototype.componentWillUnmount=function(){var d={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,d),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},x.prototype.render=function(){var d=this,t=this.props,r=t.renderTrack,c=t.renderThumb,p=t.renderMark,y=p===void 0?function(){return null}:p,T=t.values,E=t.min,D=t.max,R=t.allowOverlap,M=t.disabled,I=this.state,m=I.draggedThumbIndex,B=I.thumbZIndexes,o=I.markOffsets;return r({props:{style:{transform:"scale(1)",cursor:m>-1?"grabbing":this.props.draggableTrack?(0,l.isVertical)(this.props.direction)?"ns-resize":"ew-resize":T.length===1&&!M?"pointer":"inherit"},onMouseDown:M?l.voidFn:this.onMouseDownTrack,onTouchStart:M?l.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:M,children:g(g([],o.map(function(i,u,f){return y({props:{style:d.props.direction===h.Direction.Left||d.props.direction===h.Direction.Right?{position:"absolute",left:"".concat(i[0],"px"),marginTop:"".concat(i[1],"px")}:{position:"absolute",top:"".concat(i[0],"px"),marginLeft:"".concat(i[1],"px")},key:"mark".concat(u),ref:d.markRefs[u]},index:u})}),!0),T.map(function(i,u){var f=d.state.draggedThumbIndex===u;return c({index:u,value:i,isDragged:f,props:{style:{position:"absolute",zIndex:B[u],cursor:M?"inherit":f?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:u,tabIndex:M?void 0:0,"aria-valuemax":R?D:T[u+1]||D,"aria-valuemin":R?E:T[u-1]||E,"aria-valuenow":i,draggable:!1,ref:d.thumbRefs[u],role:"slider",onKeyDown:M?l.voidFn:d.onKeyDown,onKeyUp:M?l.voidFn:d.onKeyUp}})}),!0)})},x.defaultProps={step:1,direction:h.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},x}(k.Component);return H.default=A,H}var Xe;function jt(){return Xe||(Xe=1,function(e){var n=de&&de.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0;var a=n(Ct());e.Range=a.default;var s=Ue();Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return s.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return s.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return s.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return s.checkValuesAgainstBoundaries}});var g=Re();Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return g.Direction}})}(de)),de}var Ye=jt();function We(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),a.push.apply(a,s)}return a}function fe(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?We(Object(a),!0).forEach(function(s){It(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function It(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}var pe=G("div",{position:"relative",width:"100%"});pe.displayName="Root",pe.displayName="Root",pe.displayName="StyledRoot";var ge=G("div",function(e){var n=e.$theme,a=e.$value,s=a===void 0?[]:a,g=e.$disabled,k=e.$isDragged,l=n.sizing,h="inherit";return g?h="not-allowed":k?h="grabbing":s.length===1&&(h="pointer"),{paddingTop:l.scale600,paddingBottom:l.scale600,paddingRight:l.scale600,paddingLeft:l.scale600,display:"flex",cursor:h,backgroundColor:n.colors.sliderTrackFill}});ge.displayName="Track",ge.displayName="Track",ge.displayName="StyledTrack";var me=G("div",function(e){var n=e.$theme,a=e.$value,s=a===void 0?[]:a,g=e.$min,k=e.$max,l=e.$disabled,h=n.colors,z=n.borders,V=n.direction,A=n.borders.useRoundedCorners?z.radius100:0;return{borderTopLeftRadius:A,borderTopRightRadius:A,borderBottomRightRadius:A,borderBottomLeftRadius:A,background:Ye.getTrackBackground({values:s,colors:s.length===1?[l?h.borderOpaque:h.primary,l?h.backgroundSecondary:h.borderOpaque]:[l?h.backgroundSecondary:h.borderOpaque,l?h.borderOpaque:h.primary,l?h.backgroundSecondary:h.borderOpaque],min:g||0,max:k||0,rtl:V==="rtl"}),height:"2px",width:"100%",alignSelf:"center",cursor:l?"not-allowed":"inherit"}});me.displayName="InnerTrack",me.displayName="InnerTrack",me.displayName="StyledInnerTrack";var ve=G("div",function(e){return{width:"4px",height:"2px",backgroundColor:e.$theme.colors.backgroundPrimary,marginLeft:"16px"}});ve.displayName="Mark",ve.displayName="Mark",ve.displayName="StyledMark";var be=G("div",function(e){return fe(fe({},e.$theme.typography.font200),{},{color:e.$theme.colors.contentPrimary})});be.displayName="Tick",be.displayName="Tick",be.displayName="StyledTick";var ye=G("div",function(e){var n=e.$theme,a=n.sizing;return{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:a.scale600,paddingLeft:a.scale600,paddingBottom:a.scale400}});ye.displayName="TickBar",ye.displayName="TickBar",ye.displayName="StyledTickBar";var we=G("div",function(e){var n=e.$theme,a=e.$value,s=a===void 0?[]:a,g=e.$thumbIndex,k=e.$disabled,l=s.length===2&&g===0,h=s.length===2&&g===1;return n.direction==="rtl"&&(h||l)&&(l=!l,h=!h),{height:"24px",width:"24px",borderTopLeftRadius:"24px",borderTopRightRadius:"24px",borderBottomLeftRadius:"24px",borderBottomRightRadius:"24px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:k?n.colors.sliderHandleFillDisabled:n.colors.sliderHandleFill,outline:"none",boxShadow:e.$isFocusVisible?"0 0 0 3px ".concat(n.colors.accent):"0 1px 4px rgba(0, 0, 0, 0.12)",cursor:k?"not-allowed":"inherit"}});we.displayName="Thumb",we.displayName="Thumb",we.displayName="StyledThumb";var xe=G("div",function(e){var n=e.$disabled,a=e.$theme;return{position:"absolute",top:"-16px",width:"4px",height:"20px",backgroundColor:n?a.colors.sliderHandleFillDisabled:a.colors.sliderHandleInnerFill}});xe.displayName="InnerThumb",xe.displayName="InnerThumb",xe.displayName="StyledInnerThumb";var ke=G("div",function(e){var n=e.$disabled,a=e.$theme;return fe(fe({position:"absolute",top:"-".concat(a.sizing.scale1400)},a.typography.font200),{},{backgroundColor:n?a.colors.sliderHandleFillDisabled:a.colors.sliderHandleInnerFill,color:a.colors.contentInversePrimary,paddingLeft:a.sizing.scale600,paddingRight:a.sizing.scale600,paddingTop:a.sizing.scale500,paddingBottom:a.sizing.scale500,borderBottomLeftRadius:"48px",borderBottomRightRadius:"48px",borderTopLeftRadius:"48px",borderTopRightRadius:"48px",whiteSpace:"nowrap"})});ke.displayName="ThumbValue",ke.displayName="ThumbValue",ke.displayName="StyledThumbValue";function qe(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),a.push.apply(a,s)}return a}function Bt(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?qe(Object(a),!0).forEach(function(s){Pt(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Pt(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},W.apply(this,arguments)}function q(e,n){return zt(e)||_t(e,n)||$t(e,n)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,n){if(e){if(typeof e=="string")return Ke(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ke(e,n)}}function Ke(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,s=new Array(n);a<n;a++)s[a]=e[a];return s}function _t(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],g=!0,k=!1,l,h;try{for(a=a.call(e);!(g=(l=a.next()).done)&&(s.push(l.value),!(n&&s.length===n));g=!0);}catch(z){k=!0,h=z}finally{try{!g&&a.return!=null&&a.return()}finally{if(k)throw h}}return s}}function zt(e){if(Array.isArray(e))return e}var At=function(e){if(e.length>2||e.length===0)throw new Error("the value prop represents positions of thumbs, so its length can be only one or two");return e};function Ft(e){var n=e.overrides,a=n===void 0?{}:n,s=e.disabled,g=s===void 0?!1:s,k=e.marks,l=k===void 0?!1:k,h=e.onChange,z=h===void 0?function(){}:h,V=e.onFinalChange,A=V===void 0?function(){}:V,O=e.min,x=O===void 0?0:O,d=e.max,t=d===void 0?100:d,r=e.step,c=r===void 0?1:r,p=e.persistentThumb,y=p===void 0?!1:p,T=e.valueToLabel,E=T===void 0?function($){return $}:T,D=e.value,R=C.useContext(pt),M=C.useState(!1),I=q(M,2),m=I[0],B=I[1],o=C.useState(!1),i=q(o,2),u=i[0],f=i[1],S=C.useState(!1),v=q(S,2),w=v[0],b=v[1],P=C.useState(-1),j=q(P,2),L=j[0],N=j[1],X=C.useCallback(function($){gt($)&&b(!0);var K=$.target.parentNode.firstChild===$.target?0:1;N(K)},[]),_=C.useCallback(function($){w!==!1&&b(!1),N(-1)},[]),U=At(D),F={$disabled:g,$step:c,$min:x,$max:t,$marks:l,$value:U,$isFocusVisible:w},te=J(a.Root,pe),oe=q(te,2),ne=oe[0],re=oe[1],Te=J(a.Track,ge),ie=q(Te,2),Oe=ie[0],Q=ie[1],ue=J(a.InnerTrack,me),se=q(ue,2),ce=se[0],Ge=se[1],Je=J(a.Thumb,we),De=q(Je,2),Qe=De[0],et=De[1],tt=J(a.InnerThumb,xe),Ee=q(tt,2),nt=Ee[0],rt=Ee[1],at=J(a.ThumbValue,ke),Ce=q(at,2),ot=Ce[0],it=Ce[1],st=J(a.Tick,be),je=q(st,2),Ie=je[0],Be=je[1],ut=J(a.TickBar,ye),Pe=q(ut,2),ct=Pe[0],lt=Pe[1],dt=J(a.Mark,ve),Le=q(dt,2),ht=Le[0],ft=Le[1];return C.createElement(ne,W({"data-baseweb":"slider"},F,re,{onFocus:vt(re,X),onBlur:mt(re,_)}),C.createElement(Ye.Range,W({step:c,min:x,max:t,values:U,disabled:g,onChange:function($){return z({value:$})},onFinalChange:function($){return A({value:$})},rtl:R.direction==="rtl",renderTrack:function($){var K=$.props,Y=$.children,ee=$.isDragged;return C.createElement(Oe,W({onMouseDown:K.onMouseDown,onTouchStart:K.onTouchStart,$isDragged:ee},F,Q),C.createElement(ce,W({$isDragged:ee,ref:K.ref},F,Ge),Y))},renderThumb:function($){var K=$.props,Y=$.index,ee=$.isDragged,$e=y||(!!Y&&u||!Y&&m||ee)&&!g;return C.createElement(Qe,W({},K,{onMouseEnter:function(){Y===0?B(!0):f(!0)},onMouseLeave:function(){Y===0?B(!1):f(!1)},$thumbIndex:Y,$isDragged:ee,style:Bt({},K.style)},F,et,{$isFocusVisible:w&&L===Y}),$e&&C.createElement(ot,W({$thumbIndex:Y,$isDragged:ee},F,it),E(U[Y])),$e&&C.createElement(nt,W({$thumbIndex:Y,$isDragged:ee},F,rt)))}},l?{renderMark:function($){var K=$.props,Y=$.index;return C.createElement(ht,W({$markIndex:Y},K,F,ft))}}:{})),C.createElement(ct,W({},F,lt),C.createElement(Ie,W({},F,Be),E(x)),C.createElement(Ie,W({},F,Be),E(t))))}const Vt=le("div",{target:"ew7r33m3"})(({disabled:e,theme:n})=>({alignItems:"center",backgroundColor:e?n.colors.gray:n.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",justifyContent:"center",height:n.sizes.sliderThumb,width:n.sizes.sliderThumb,":focus":{outline:"none"},":focus-visible":{boxShadow:`0 0 0 0.2rem ${bt(n.colors.primary,.5)}`}}),""),Nt=le("div",{target:"ew7r33m2"})(({disabled:e,theme:n})=>({fontFamily:n.genericFonts.codeFont,fontSize:n.fontSizes.sm,color:e?n.colors.gray:n.colors.primary,top:"-1.6em",position:"absolute",whiteSpace:"nowrap",backgroundColor:n.colors.transparent,lineHeight:n.lineHeights.base,fontWeight:n.fontWeights.normal,pointerEvents:"none"}),""),Ut=le("div",{target:"ew7r33m1"})(({theme:e})=>({fontSize:e.fontSizes.sm,paddingBottom:e.spacing.none,paddingLeft:e.spacing.none,paddingRight:e.spacing.none,paddingTop:"0.65em",justifyContent:"space-between",alignItems:"center",display:"flex"}),""),Ze=le("div",{target:"ew7r33m0"})(({disabled:e,theme:n})=>({lineHeight:n.lineHeights.base,fontWeight:n.fontWeights.normal,fontFamily:n.genericFonts.codeFont,color:e?n.colors.fadedText40:"inherit"}),""),Ht=200;function Xt({disabled:e,element:n,widgetMgr:a,fragmentId:s}){var g;const[k,l]=Et({getStateFromWidgetMgr:Yt,getDefaultStateFromProto:Wt,getCurrStateFromProto:qt,updateWidgetMgrState:Kt,element:n,widgetMgr:a,fragmentId:s}),[h,z]=C.useState(k),V=C.useRef(null),[A]=C.useState([]),[O]=C.useState([]),{colors:x,fonts:d,fontSizes:t,spacing:r}=wt(),c=h.map(m=>Se(m,n)),p=Se(n.min,n),y=Se(n.max,n),T=n.label;C.useEffect(()=>{z(k)},[k]);const E=C.useCallback(xt(Ht,m=>{l({value:m,fromUi:!0})}),[]),D=C.useCallback(({value:m})=>{z(m),E(m)},[E]),R=C.useCallback(()=>Z.jsxs(Ut,{"data-testid":"stSliderTickBar",children:[Z.jsx(Ze,{disabled:e,"data-testid":"stSliderTickBarMin",children:p}),Z.jsx(Ze,{disabled:e,"data-testid":"stSliderTickBarMax",children:y})]}),[p,y,e]),M=C.useCallback(ze.forwardRef(function(m,B){const{$thumbIndex:o}=m,i=o||0;A[i]=B,O[i]||(O[i]=ze.createRef());const u=kt(m,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]),f=c[i];return Z.jsx(Vt,{...u,disabled:m.$disabled===!0,ref:A[i],"aria-valuetext":f,"aria-label":T,children:Z.jsx(Nt,{"data-testid":"stSliderThumbValue",disabled:m.$disabled===!0,ref:O[i],children:f})})}),[]);C.useEffect(()=>{var m,B;O.map((v,w)=>{v.current&&(v.current.innerText=c[w])}),A.map((v,w)=>{v.current&&v.current.setAttribute("aria-valuetext",c[w])});const o=V.current??null,i=A[0].current,u=(m=A[1])==null?void 0:m.current,f=O[0].current,S=(B=O[1])==null?void 0:B.current;Jt(o,i,u,f,S)});const I=C.useCallback(({$disabled:m})=>({height:r.twoXS,...m?{background:x.darkenedBgMix25}:{}}),[x,r]);return Z.jsxs("div",{ref:V,className:"stSlider","data-testid":"stSlider",children:[Z.jsx(Tt,{label:n.label,disabled:e,labelVisibility:Ot((g=n.labelVisibility)==null?void 0:g.value),children:n.help&&Z.jsx(Mt,{children:Z.jsx(Rt,{content:n.help,placement:St.TOP_RIGHT})})}),Z.jsx(Ft,{min:n.min,max:n.max,step:n.step,value:Gt(h,n),onChange:D,disabled:e,overrides:{Thumb:M,Tick:{style:{fontFamily:d.monospace}},Track:{style:{backgroundColor:"none !important",paddingBottom:r.none,paddingLeft:r.none,paddingRight:r.none,paddingTop:`calc(${t.sm} * 1.35)`}},InnerTrack:{style:I},TickBar:R}})]})}function Yt(e,n){return e.getDoubleArrayValue(n)}function Wt(e){return e.default}function qt(e){return e.value}function Kt(e,n,a,s){n.setDoubleArrayValue(e,a.value,{fromUi:a.fromUi},s)}function Zt(e){const{dataType:n}=e;return n===Me.DataType.DATETIME||n===Me.DataType.DATE||n===Me.DataType.TIME}function Se(e,n){const{format:a,options:s}=n;return Zt(n)?Dt.utc(e/1e3).format(a):s.length>0?Ae.sprintf(a,s[e]):Ae.sprintf(a,e)}function Gt(e,n){const{min:a,max:s}=n;let g=e[0],k=e.length>1?e[1]:e[0];return g>k&&(g=k),g<a&&(g=a),g>s&&(g=s),k<a&&(k=a),k>s&&(k=s),e.length>1?[g,k]:[g]}function Jt(e,n,a,s,g){!e||!n||!s||(ae(e,n,s),a&&g&&(ae(e,a,g),Qt(e,n,a,s,g)))}function ae(e,n,a){const s=e.getBoundingClientRect(),g=n.getBoundingClientRect(),k=a.getBoundingClientRect(),l=g.left+g.width/2,h=l-k.width/2<s.left,z=l+k.width/2>s.right;a.style.left=h?"0":"",a.style.right=z?"0":""}function Qt(e,n,a,s,g){const k=e.getBoundingClientRect(),l=n.getBoundingClientRect(),h=a.getBoundingClientRect(),z=s.getBoundingClientRect(),V=g.getBoundingClientRect(),A=k.left+k.width/2,O=l.left+l.width/2,x=h.left+h.width/2,d=O-z.width/2>=k.left,t=x+V.width/2<=k.right,r=l.left-z.width>=k.left,c=h.right+V.width<=k.right,p=d?z.width/2:z.width,y=t?V.width/2:V.width,T=O+p;if(x-y-T>24){ae(e,n,s),ae(e,a,g);return}if(r&&c){s.style.left="",s.style.right=`${Math.round(l.width)}px`,g.style.left=`${Math.round(h.width)}px`,g.style.right="";return}O<A?(ae(e,n,s),g.style.left=`${Math.round(O+p+24-x)}px`,g.style.right=""):(ae(e,a,g),s.style.left="",s.style.right=`${-Math.round(x-y-24-O)}px`)}const en=yt(C.memo(Xt));export{en as default};
