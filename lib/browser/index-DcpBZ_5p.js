import{c as k,r as i,bN as P,z as D,cX as x,j as l,bX as E,bY as H,ca as M,bZ as U,bG as B,cY as L}from"./index-Bil1Hr5a.js";import{u as _}from"./uniqueId-D3HRkS7p.js";import{u as G,a as N,b as O}from"./useOnInputChange-YkPiJCpf.js";import{a as X}from"./useBasicWidgetState-CuWiximn.js";import{I as Y}from"./InputInstructions-MnrwD84N.js";import{I as A}from"./input-Blqccch_.js";const K=k("div",{target:"e11y4ecf0"})({name:"bjn8wh",styles:"position:relative"});function Z({disabled:t,element:e,widgetMgr:r,fragmentId:d}){var g;const[o,u]=i.useState(()=>S(r,e)??null),[W,y]=P(),[s,m]=i.useState(!1),I=i.useCallback(()=>{u(e.default??null),m(!0)},[e.default]),[v,p]=X({getStateFromWidgetMgr:S,getDefaultStateFromProto:q,getCurrStateFromProto:J,updateWidgetMgrState:Q,element:e,widgetMgr:r,fragmentId:d,onFormCleared:I});G(v,o,u,s);const[C,b]=i.useState(!1),a=D(),[h]=i.useState(()=>_("text_input_")),{placeholder:T,formId:n,maxChars:f}=e,c=i.useCallback(()=>{m(!1),p({value:o,fromUi:!0})},[o,p]),j=x({formId:n})?r.allowFormEnterToSubmit(n):s,F=C&&W>a.breakpoints.hideWidgetDetails,w=i.useCallback(()=>{s&&c(),b(!1)},[s,c]),z=i.useCallback(()=>{b(!0)},[]),R=N({formId:n,maxChars:f,setDirty:m,setUiValue:u,setValueWithSource:p}),V=O(n,c,s,r,d);return l.jsxs(K,{className:"stTextInput","data-testid":"stTextInput",ref:y,children:[l.jsx(E,{label:e.label,disabled:t,labelVisibility:H((g=e.labelVisibility)==null?void 0:g.value),htmlFor:h,children:e.help&&l.jsx(M,{children:l.jsx(U,{content:e.help,placement:B.TOP_RIGHT})})}),l.jsx(A,{value:o??"",placeholder:T,onBlur:w,onFocus:z,onChange:R,onKeyPress:V,"aria-label":e.label,disabled:t,id:h,type:$(e),autoComplete:e.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.md,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),F&&l.jsx(Y,{dirty:s,value:o??"",maxLength:f,inForm:x({formId:n}),allowEnterToSubmit:j})]})}function S(t,e){return t.getStringValue(e)??null}function q(t){return t.default??null}function J(t){return t.value??null}function Q(t,e,r,d){e.setStringValue(t,r.value,{fromUi:r.fromUi},d)}function $(t){return t.type===L.Type.PASSWORD?"password":"text"}const ee=i.memo(Z);export{ee as default};
